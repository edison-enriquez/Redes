<!DOCTYPE HTML>
<html lang="en" class="dark" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Tabla de routing IP - Switching, Routing, y Wireless Essentials</title>


        <!-- Custom HTML head -->
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Tabla de routing IP - Switching, Routing, y Wireless Essentials</title>
            <link rel="stylesheet" href="/css/custom.css">
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm/css/xterm.css" />
</head>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">
        
        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../theme/css/additional.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "dark";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('dark')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../homepage.html">Nwtworking - Home</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Networking/introduction.html">Configuración básica de dispositivos</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Networking/basic_Config_of_switch.html">Configuración de parámetros iniciales de un switch</a></li></ol></li><li class="chapter-item "><a href="../../Networking/switching/frame_forwarding.html">Conceptos de switching</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Networking/switching/introduction.html">Configuración de puertos de un switch</a></li><li class="chapter-item "><a href="../../Networking/switching/collision_and_broadcast_domains.html">Dominios de switching</a></li></ol></li><li class="chapter-item "><a href="../../Networking/VLAN/introduction.html">VLANs</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Networking/VLAN/VLANs_in_a_Multi_Switched_Environment.html">Redes VLAN en un entorno conmutado múltiple</a></li><li class="chapter-item "><a href="../../Networking/VLAN/VLANs_config.html">Configuración de VLAN</a></li><li class="chapter-item "><a href="../../Networking/VLAN/VLAN_Trunks.html">Enlaces troncales de la VLAN</a></li><li class="chapter-item "><a href="../../Networking/VLAN/VLAN_configuration_example.html">Ejemplo de Configuración de una VLAN - CISCO</a></li></ol></li><li class="chapter-item "><a href="../../Networking/DHCPv4/DHCPv4_Concepts.html">DHCPv4</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Networking/DHCPv4/Configure_a_Cisco_IOS_DHCPv4_Server.html">Configure un servidor DHCPv4 del IOS de Cisco</a></li><li class="chapter-item "><a href="../../Networking/DHCPv4/Configure_a_DHCPv4_Client.html">Configurar un router como cliente DHCPv4</a></li><li class="chapter-item "><a href="../../Networking/DHCPv4/DHCPv4_Module_Practice.html">Practica DHCPv4</a></li></ol></li><li class="chapter-item expanded "><a href="../../Networking/routing/Routing_Concepts.html">Conceptos de enrutamiento</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Networking/routing/Packet_Forwarding.html">Reenvío de paquetes</a></li><li class="chapter-item "><a href="../../Networking/routing/Basic_Router_Configuration_Review.html">Configuración básica de un router</a></li><li class="chapter-item expanded "><a href="../../Networking/routing/IP_Routing_Table.html" class="active">Tabla de routing IP</a></li><li class="chapter-item "><a href="../../Networking/Static_and_Dynamic_Routing.html">Enrutamiento estático y dinámico</a></li></ol></li><li class="chapter-item "><a href="../../Networking/routing/Static_Routes.html">Rutas IP estáticas</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Networking/routing/Configure_IP_Static_Routes.html">Configuración de rutas estáticas IP</a></li><li class="chapter-item "><a href="../../Networking/routing/Default_Static_Route.html">Configuración de rutas estáticas predeterminadas IP</a></li><li class="chapter-item "><a href="../../Networking/routing/Floating_Static_Routes.html">Configuración de rutas estáticas flotantes</a></li><li class="chapter-item "><a href="../../Networking/routing/Host_Routes.html">Configuración de rutas de host estáticas</a></li><li class="chapter-item "><a href="../../Networking/routing/Static_Routing_Configuration_Guide.html">Guía de configuración de enrutamiento estático</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Switching, Routing, y Wireless Essentials</h1>

                    <div class="right-buttons">

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="tabla-de-routing-ip"><a class="header" href="#tabla-de-routing-ip">Tabla de routing IP</a></h1>
<h2 id="origen-de-la-ruta"><a class="header" href="#origen-de-la-ruta">Origen de la ruta</a></h2>
<p>¿Cómo sabe un router dónde puede enviar paquetes? Crea una tabla de enrutamiento basada en la red en la que se encuentra.</p>
<p>Una tabla de enrutamiento contiene una lista de rutas a redes conocidas (prefijos y longitudes de prefijo). La fuente de esta información se deriva de lo siguiente:</p>
<ol>
<li>Redes conectadas directamente</li>
<li>Rutas estáticas</li>
<li>Protocolos de enrutamiento dinámico</li>
</ol>
<p>En la figura, R1 y R2 están utilizando el protocolo de enrutamiento dinámico OSPF para compartir información de enrutamiento. Además, R2 se configura con una ruta estática predeterminada al ISP.</p>
<p><img src="./img/IP_table_routing.png" alt="IP Table Routing" /></p>
<h3 id="1-tabla-del-routing-del-r1"><a class="header" href="#1-tabla-del-routing-del-r1">1. Tabla del Routing del R1</a></h3>
<pre><code class="language-bash">R1# show ip route
Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2
       i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2
       ia - IS-IS inter area, * - candidate default, U - per-user static route
       o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP
       a - application route
       + - replicated route, % - next hop override, p - overrides from PfR
Gateway of last resort is 10.0.3.2 to network 0.0.0.0
O*E2 0.0.0.0/0 [110/1] via 10.0.3.2, 00:51:34, Serial0/1/1
      10.0.0.0/8 is variably subnetted, 8 subnets, 2 masks
C 10.0.1.0/24 está conectado directamente, GigabiteThernet0/0/0
L 10.0.1.1/32 está conectado directamente, GigabiteThernet0/0/0
C 10.0.2.0/24 está conectado directamente, GigabiteThernet0/0/1
L 10.0.2.1/32 está conectado directamente, GigabiteThernet0/0/1
C 10.0.3.0/24 está conectado directamente, Serial0/1/1
L 10.0.3.1/32 está conectado directamente, Serial0/1/1
O 10.0.4.0/24 [110/50] a 10.0.3.2, 00:24:22, Serial0/1/1
O 10.0.5.0/24 [110/50] a 10.0.3.2, 00:24:15, Serial0/1/1
R1#
</code></pre>
<h3 id="2-tabla-del-routing-del-r1"><a class="header" href="#2-tabla-del-routing-del-r1">2. Tabla del Routing del R1</a></h3>
<pre><code class="language-bash">R2# show ip route
Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2
       i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2
       ia - IS-IS inter area, * - candidate default, U - per-user static route
       o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP
       a - application route
       + - replicated route, % - next hop override, p - overrides from PfR
Gateway of last resort is 209.165.200.226 to network 0.0.0.0
S* 0.0.0.0/0 [1/0] a través de 209.165.200.226
     10.0.0.0/8 is variably subnetted, 8 subnets, 2 masks
O 10.0.1.0/24 [110/65] a 10.0.3.1, 00:31:38, Serial0/1/0
O 10.0.2.0/24 [110/65] a 10.0.3.1, 00:31:38, Serial0/1/0
C 10.0.3.0/24 está conectado directamente, Serial0/1/0
L 10.0.3.2/32 está conectado directamente, Serial0/1/0
C 10.0.4.0/24 está conectado directamente, GigabiteThernet0/0/0
L 10.0.4.1/32 está conectado directamente, GigabiteThernet0/0/0
C 10.0.5.0/24 está conectado directamente, GigabiteThernet0/0/1
L 10.0.5.1/32 está conectado directamente, GigabiteThernet0/0/1
     209.165.200.0/24 is variably subnetted, 2 subnets, 2 masks
C 209.165.200.224/30está directamente conectado, Serial0/1/1
L 209.165.200.225/32 está conectado directamente, Serie0 / 1/1
R2#
</code></pre>
<p>En las tablas de enrutamiento para R1 y R2, observe que los orígenes de cada ruta se identifican mediante un código. El código identifica la forma en que se descubrió la ruta. Por ejemplo, los códigos frecuentes incluyen lo siguiente:</p>
<ul>
<li><code>L</code> - Identifica la dirección asignada a la interfaz de un router. Esto permite que el router determine de forma eficaz si recibe un paquete para la interfaz o para reenviar.</li>
<li><code>C</code> - Identifica una red conectada directamente.</li>
<li><code>S</code> - Identifica una ruta estática creada para llegar a una red específica.</li>
<li><code>O</code> - Identifica una red que se descubre de forma dinámica de otro router con el protocolo de routing OSPF.</li>
<li><code>*</code> - la ruta es candidata para una ruta predeterminada.</li>
</ul>
<h2 id="principios-de-la-tabla-de-enrutamiento"><a class="header" href="#principios-de-la-tabla-de-enrutamiento">Principios de la tabla de enrutamiento</a></h2>
<p>Existen tres principios de tabla de enrutamiento como se describe en la tabla. Estos son problemas que se abordan mediante la configuración adecuada de protocolos de enrutamiento dinámico o rutas estáticas en todos los enrutadores entre los dispositivos de origen y destino.</p>
<div class="table-wrapper"><table><thead><tr><th>Principios de la tabla de enrutamiento</th><th>Ejemplo</th></tr></thead><tbody>
<tr><td>Cada router toma su decisión por sí solo, basándose en la información que tiene en su propia tabla de enrutamiento.</td><td>R1 sólo puede reenviar paquetes utilizando su propia tabla de enrutamiento. <br> R1 no sabe qué rutas están en las tablas de enrutamiento de otros (por ejemplo, R2).</td></tr>
<tr><td>La información de una tabla de enrutamiento de un enrutador no necesariamente coincide con la tabla de enrutamiento de otro enrutador.</td><td>Solo porque R1 tiene ruta en su tabla de enrutamiento a una red en el internet a través de R2, eso no significa que R2 sepa sobre eso mismo red.</td></tr>
<tr><td>La información de enrutamiento sobre una ruta no proporciona enrutamiento de retorno al secundario.</td><td>R1 recibe un paquete con la dirección IP de destino de PC1 y la la dirección IP de origen de PC3. Solo porque R1 sabe reenviar el paquete fuera de su interfaz G0/0/0, no significa necesariamente que sepa cómo reenviar paquetes procedentes de PC1 a la red remota de PC3.</td></tr>
</tbody></table>
</div>
<h3 id="entradas-de-la-tabla-de-routing"><a class="header" href="#entradas-de-la-tabla-de-routing">Entradas de la tabla de routing</a></h3>
<p>Como administrador de redes, es imprescindible saber cómo interpretar el contenido de las tablas de routing IPv4 e IPv6. En la ilustración, se muestra una entrada de la tabla de routing IPv4 en el R1 para la ruta a la red remota 10.0.4.0/24 y 2001:db8:acad:4::/64. Ambas rutas ruta se descubrieron de forma dinámica de otro router a través del protocolo de routing OSPF.</p>
<p><img src="./img/IP_Table_IPV4.png" alt="IP Table IPV4" /></p>
<h2 id="redes-conectadas-directamente"><a class="header" href="#redes-conectadas-directamente">Redes conectadas directamente</a></h2>
<p><br><br>
Para que un router pueda aprender acerca de las redes remotas, debe tener al menos una interfaz activa configurada con una dirección IP y una máscara de subred (longitud de prefijo). Esto se conoce como una red conectada directamente o una ruta conectada directamente. Los routers agregan una ruta conectada directamente cuando una interfaz se configura con una dirección IP y se activa.
<br><br>
Una red conectada directamente se indica mediante un código de estado de C en la tabla de enrutamiento. La ruta contiene un prefijo de red y una longitud de prefijo.
<br><br>
La tabla de enrutamiento también contiene una ruta local para cada una de sus redes conectadas directamente, indicada por el código de estado de L. Esta es la dirección IP que se asigna a la interfaz en esa red conectada directamente. Para las rutas locales IPv4, la longitud del prefijo es /32 y para las rutas locales IPv6 la longitud del prefijo es /128. Esto significa que la dirección IP de destino del paquete debe coincidir con todos los bits de la ruta local para que esta ruta sea una coincidencia. El propósito de la ruta local es permitir que el router determine de forma eficaz si recibe un paquete para la interfaz o para reenviar.
<br><br>
Las redes conectadas directamente y las rutas locales se muestran en el siguiente resultado.</p>
<pre><code class="language-bash">R1# show ip route
Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
(Output omitted)     
C        10.0.1.0/24 is directly connected, GigabitEthernet0/0/0
L        10.0.1.1/32 is directly connected, GigabitEthernet0/0/0
R1# 
R1# show ipv6 route
IPv6 Routing Table - default - 10 entries
Codes: C - Connected, L - Local, S - Static, U - Per-user Static route
(Output omitted)      
       
C   2001:DB8:ACAD:1::/64 [0/0]
     via GigabitEthernet0/0/0, directly connected
L   2001:DB8:ACAD:1::1/128 [0/0]
     via GigabitEthernet0/0/0, receive
R1#
</code></pre>
<h2 id="rutas-estáticas"><a class="header" href="#rutas-estáticas">Rutas estáticas</a></h2>
<p><br><br>
Después de configurar las interfaces conectadas directamente y de agregarlas a la tabla de routing, se puede implementar el routing estático o dinámico.
<br><br>
Las rutas estáticas se configuran de forma manual. Estas definen una ruta explícita entre dos dispositivos de red. A diferencia de los protocolos de routing dinámico, las rutas estáticas no se actualizan automáticamente y se deben reconfigurar de forma manual si se modifica la topología de la red. Los beneficios de utilizar rutas estáticas incluyen la mejora de la seguridad y la eficacia de los recursos. Las rutas estáticas consumen menos ancho de banda que los protocolos de routing dinámico, y no se usa ningún ciclo de CPU para calcular y comunicar las rutas. La principal desventaja de usar rutas estáticas es que no se vuelven a configurar de manera automática si se modifica la topología de la red.
<br><br>
El routing estático tiene tres usos principales:
<br><br></p>
<ul>
<li>Facilita el mantenimiento de la tabla de routing en redes más pequeñas en las cuales no está previsto que crezcan significativamente.
Utiliza una única ruta predeterminada para representar una ruta hacia cualquier red que no tenga una coincidencia más específica con otra ruta en la tabla de routing. Las rutas predeterminadas se utilizan para enviar tráfico a cualquier destino que esté más allá del próximo router ascendente.
Enruta trafico de y hacia redes internas. Una red de rutas internas es aquella a la cual se accede a través un de una única ruta y cuyo router tiene solo un vecino.
<br><br>
La figura muestra un ejemplo de red superpuesta. En dicha ilustración, observe que cualquier red conectada al R1 solo tiene una manera de alcanzar otros destinos, ya sean redes conectadas al R2 o destinos más allá del R2. Esto significa que las redes 10.0.1.0/24 y 10.0.2.0/24 son redes stub y R1 es un router stub.</li>
</ul>
<p><img src="./img/static_routing.png" alt="Static Routing" />
<br><br>
En este ejemplo, se puede configurar una ruta estática en R2 para llegar a las redes R1. Además, como el R1 tiene solo una forma de enviar tráfico no local, se puede configurar una ruta estática predeterminada en el R1 para señalar al R2 como el siguiente salto para todas las otras redes.</p>
<h2 id="rutas-estáticas-en-la-tabla-de-enrutamiento-ip"><a class="header" href="#rutas-estáticas-en-la-tabla-de-enrutamiento-ip">Rutas estáticas en la tabla de enrutamiento IP</a></h2>
<p><br><br>
Para demostrar el enrutamiento estático, la topología de la figura se simplifica para mostrar sólo una LAN conectada a cada enrutador. La figura muestra las rutas estáticas IPv4 e IPv6 configuradas en R1 para alcanzar las redes 10.0.4.0/24 y 2001:db8:acad:4: :/64 en R2. Los comandos de configuración son sólo para demostración y se describen en otro módulo.</p>
<p><img src="./img/STATIC_IP_TABLES.png" alt="Static IP Table" />
<br><br>
La salida muestra las entradas de enrutamiento estático IPv4 e IPv6 en R1 que pueden alcanzar las redes 10.0.4.0/24 y 2001:db8:acad:4: :/64 en R2. Observe que ambas entradas de enrutamiento utilizan el código de estado de S indicar que la ruta fue aprendida por una ruta estática. Ambas entradas también incluyen la dirección IP del router siguiente salto, a través de ip-address. El static parámetro al final del comando muestra sólo rutas estáticas.
<br><br></p>
<pre><code class="language-bash">R1# show ip route static
Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
(output omitted)
       
      10.0.0.0/8 is variably subnetted, 8 subnets, 2 masks
S        10.0.4.0/24 [1/0] via 10.0.3.2
R1# show ipv6 route static
IPv6 Routing Table - default - 8 entries
Codes: C - Connected, L - Local, S - Static, U - Per-user Static route
(output omitted)
       
S   2001:DB8:ACAD:4::/64 [1/0]
     via 2001:DB8:ACAD:3::2 
</code></pre>
<h2 id="protocolos-de-routing-dinámico"><a class="header" href="#protocolos-de-routing-dinámico">Protocolos de routing dinámico</a></h2>
<p><br><br>
Los routers usan protocolos de enrutamiento dinámico para compartir información sobre el estado y la posibilidad de conexión de redes remotas. Los protocolos de routing dinámico realizan diversas actividades, como la detección de redes y el mantenimiento de las tablas de routing.
<br><br>
Las ventajas importantes de los protocolos de enrutamiento dinámico son la capacidad de seleccionar una mejor ruta y la capacidad de descubrir automáticamente una nueva mejor ruta cuando se produce un cambio en la topología.
<br><br>
El descubrimiento de redes es la capacidad de un protocolo de enrutamiento de compartir información sobre las redes que conoce con otros routers que también están usando el mismo protocolo de enrutamiento. En lugar de depender de las rutas estáticas configuradas manualmente hacia redes remotas en cada router, los protocolos de routing dinámico permiten que los routers descubran estas redes de forma automática a través de otros routers. Estas redes y la mejor ruta hacia cada una se agregan a la tabla de routing del router y se identifican como redes descubiertas por un protocolo de routing dinámico específico.
<br><br>
La figura muestra los routers R1 y R2 que utilizan un protocolo de enrutamiento común para compartir información de red.
<br><br>
<img src="./img/config_ip_table.png" alt="Config IP Table" />
<br><br></p>
<h3 id="rutas-dinámicas-en-la-tabla-de-enrutamiento-ip"><a class="header" href="#rutas-dinámicas-en-la-tabla-de-enrutamiento-ip">Rutas dinámicas en la tabla de enrutamiento IP</a></h3>
<p>En un ejemplo anterior se usaban rutas estáticas a las redes 10.0.4.0/24 y 2001:db8:acad:4: :/64. Estas rutas estáticas ya no están configuradas y ahora OSPF se utiliza para aprender dinámicamente todas las redes conectadas a R1 y R2. Los siguientes ejemplos muestran las entradas de enrutamiento OSPF IPv4 e IPv6 en R1 que pueden llegar a estas redes en R2. Observe que ambas entradas de enrutamiento utilizan el código de estado de O para indicar que la ruta fue aprendida por el protocolo de enrutamiento OSPF. Ambas entradas también incluyen la dirección IP del router de salto siguiente, a través de ip-address.
<br><br></p>
<p><strong>Nota:</strong> Los protocolos de enrutamiento IPv6 utilizan la dirección de vínculo local del router de siguiente salto.
<br><br></p>
<p><strong>Nota:</strong> La configuración de enrutamiento OSPF para IPv4 e IPv6 está fuera del alcance de este curso</p>
<pre><code class="language-bash">R1# show ip route
Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area 
(output omitted for brevity)
O        10.0.4.0/24 [110/50] via 10.0.3.2, 00:24:22, Serial0/1/1
O        10.0.5.0/24 [110/50] via 10.0.3.2, 00:24:15, Serial0/1/1
R1# show ipv6 route
IPv6 Routing Table - default - 10 entries
(Output omitted)
       NDr - Redirect, RL - RPL, O - OSPF Intra, OI - OSPF Inter
O   2001:DB8:ACAD:4::/64 [110/50]
     via FE80::2:C, Serial0/1/1
O   2001:DB8:ACAD:5::/64 [110/50]
     via FE80::2:C, Serial0/1/1
</code></pre>
<h2 id="ruta-predeterminada"><a class="header" href="#ruta-predeterminada">Ruta predeterminada</a></h2>
<p><br><br>
Las rutas predeterminadas son similares a un gateway predeterminado en un host. La ruta predeterminada especifica un enrutador de salto siguiente que se utilizará cuando la tabla de enrutamiento no contiene una ruta específica que coincida con la dirección IP de destino.
<br><br>
Una ruta predeterminada puede ser una ruta estática o aprenderse automáticamente de un protocolo de enrutamiento dinámico. Una ruta predeterminada tiene una entrada de ruta IPv4 de 0.0.0.0/0 o una entrada de ruta IPv6 de: :/0. Esto significa que cero o ningún bit deben coincidir entre la dirección IP de destino y la ruta predeterminada.
<br><br>
La mayoría de los routers empresariales tienen una ruta predeterminada en su tabla de enrutamiento. Esto es para reducir el número de rutas en una tabla de enrutamiento.
<br><br>
Un router, como un router doméstico o de oficina pequeña que solo tiene una LAN, puede llegar a todas sus redes remotas a través de una ruta predeterminada. Esto es útil cuando el router solo tiene redes conectadas directamente y un punto de salida a un enrutador proveedor de servicios.
<br><br>
En la figura, los routers R1 y R2 utilizan OSPF para compartir información de enrutamiento sobre sus propias redes (10.0.x.x/24 y 2001:db8:acad:x: :/64 redes). R2 tiene una ruta estática predeterminada al router ISP. R2 reenviará al router ISP cualquier paquete con una dirección IP de destino que no coincida específicamente con una de las redes de su tabla de enrutamiento. Esto incluiría todos los paquetes destinados a Internet.
<br><br></p>
<p><img src="./img/default_routing.png" alt="Ruta Predeterminada" /></p>
<ol>
<li>R2 tiene una ruta estatica predeterminada al enrutador ISP</li>
<li>R2 a R1 anuncia la ruta predeterminada mediante el protocolo de enrutamiento dinámico OSPF. Hay una flecha que muestra la ruta al ISP.
<br><br>
R2 ha compartido su ruta predeterminada con R1 usando OSPF. R1 ahora tendrá una ruta predeterminada en su tabla de enrutamiento que aprendió dinámicamente de OSPF. R1 también reenviará a R2 cualquier paquete con una dirección IP de destino que no coincida específicamente con una de las redes de su tabla de enrutamiento.
<br><br>
Los ejemplos siguientes muestran las entradas de la tabla de enrutamiento IPv4 e IPv6 para las rutas estáticas predeterminadas configuradas en R2.</li>
</ol>
<pre><code class="language-bash">R2# show ip route
(Output omitted)
S*    0.0.0.0/0 [1/0] via 209.165.200.226  
R2# 
R2# show ipv6 route
(Output omitted)
S   ::/0 [1/0]
     via 2001:DB8:FEED:224::2
R2#
</code></pre>
<h2 id="estructura-de-una-tabla-de-enrutamiento-ipv4"><a class="header" href="#estructura-de-una-tabla-de-enrutamiento-ipv4">Estructura de una tabla de enrutamiento IPv4</a></h2>
<p><br><br>
IPv4 se estandarizó a principios de la década de 1980 utilizando la arquitectura de direccionamiento de clase ahora obsoleta. La tabla de enrutamiento IPv4 se organiza utilizando esta misma estructura de clase. En la show ip route salida, observe que algunas entradas de ruta se dejan justificadas mientras que otras están sangradas. Esto se basa en la forma en que el proceso de enrutamiento busca en la tabla de enrutamiento IPv4 la coincidencia más larga. Todo esto fue debido a un discurso de clase. Aunque el proceso de búsqueda ya no utiliza clases, la estructura de la tabla de enrutamiento IPv4 sigue conservándose en este formato.</p>
<p><br><br></p>
<pre><code class="language-bash">Router# show ip route
(Output omitted)
     192.168.1.0/24 is variably subnetted, 2 subnets, 2 masks
C       192.168.1.0/24 is directly connected, GigabitEthernet0/0
L       192.168.1.1/32 is directly connected, GigabitEthernet0/0
O    192.168.2.0/24 [110/65] via 192.168.12.2, 00:32:33, Serial0/0/0
O    192.168.3.0/24 [110/65] via 192.168.13.2, 00:31:48, Serial0/0/1
     192.168.12.0/24 is variably subnetted, 2 subnets, 2 masks
C       192.168.12.0/30 is directly connected, Serial0/0/0
L       192.168.12.1/32 is directly connected, Serial0/0/0
     192.168.13.0/24 is variably subnetted, 2 subnets, 2 masks
C       192.168.13.0/30 is directly connected, Serial0/0/1
L       192.168.13.1/32 is directly connected, Serial0/0/1
     192.168.23.0/30 is subnetted, 1 subnets
O       192.168.23.0/30 [110/128] via 192.168.12.2, 00:31:38, Serial0/0/0
Router#
</code></pre>
<p><br><br>
<strong>Nota:</strong> La tabla de enrutamiento IPv4 del ejemplo no procede de ningún router de la topología utilizada en este módulo.
<br><br>
Aunque los detalles de la estructura están fuera del alcance de este módulo, es útil reconocer la estructura de la tabla. Una entrada sangría se conoce como ruta secundaria. Una entrada de ruta se sangra si es la subred de una dirección con clase (red de clase A, B o C). Las redes conectadas directamente siempre tendrán sangría (rutas secundarias) porque la dirección local de la interfaz siempre se introduce en la tabla de enrutamiento como /32. La ruta secundaria incluirá el origen de la ruta y toda la información de reenvío, como la dirección de salto siguiente. La dirección de red con clase de esta subred se mostrará encima de la entrada de ruta, con menos sangría y sin código fuente. Esto se conoce como “ruta principal”.
<br><br>
<strong>Nota:</strong> Esto es solo una breve introducción a la estructura de una tabla de enrutamiento IPv4 y no cubre detalles ni detalles específicos de esta arquitectura.
<br><br>
El siguiente ejemplo muestra la tabla de enrutamiento IPv4 de R1 en la topología. Observe que todas las redes de la topología son subredes, que son rutas secundarias, de la red de clase A y de la ruta principal10.0.0.0/8.</p>
<pre><code class="language-bash">R1# show ip route
(output omitted for brevity)
O*E2  0.0.0.0/0 [110/1] via 10.0.3.2, 00:51:34, Serial0/1/1
      10.0.0.0/8 is variably subnetted, 8 subnets, 2 masks
C        10.0.1.0/24 is directly connected, GigabitEthernet0/0/0
L        10.0.1.1/32 is directly connected, GigabitEthernet0/0/0
C        10.0.2.0/24 is directly connected, GigabitEthernet0/0/1
L        10.0.2.1/32 is directly connected, GigabitEthernet0/0/1
C        10.0.3.0/24 is directly connected, Serial0/1/1
L        10.0.3.1/32 is directly connected, Serial0/1/1
O        10.0.4.0/24 [110/50] via 10.0.3.2, 00:24:22, Serial0/1/1
O        10.0.5.0/24 [110/50] via 10.0.3.2, 00:24:15, Serial0/1/1
R1#
</code></pre>
<h2 id="estructura-de-una-tabla-de-enrutamiento-ipv6"><a class="header" href="#estructura-de-una-tabla-de-enrutamiento-ipv6">Estructura de una tabla de enrutamiento IPv6</a></h2>
<p><br><br>
El concepto de direccionamiento con clase nunca formaba parte de IPv6, por lo que la estructura de una tabla de enrutamiento con IPv6 es muy simple. Cada entrada de ruta IPv6 está formateada y alineada de la misma manera.
<br><br></p>
<pre><code class="language-bash">R1# show ipv6 route
(output omitted for brevity)
OE2 ::/0 [110/1], tag 2
     via FE80::2:C, Serial0/0/1
C   2001:DB8:ACAD:1::/64 [0/0]
     via GigabitEthernet0/0/0, directly connected
L   2001:DB8:ACAD:1::1/128 [0/0]
     via GigabitEthernet0/0/0, receive
C   2001:DB8:ACAD:2::/64 [0/0]
     via GigabitEthernet0/0/1, directly connected
L   2001:DB8:ACAD:2::1/128 [0/0]
     via GigabitEthernet0/0/1, receive
C   2001:DB8:ACAD:3::/64 [0/0]
     via Serial0/1/1, directly connected
L   2001:DB8:ACAD:3::1/128 [0/0]
     via Serial0/1/1, receive
O   2001:DB8:ACAD:4::/64 [110/50]
     via FE80::2:C, Serial0/1/1
O   2001:DB8:ACAD:5::/64 [110/50]
     via FE80::2:C, Serial0/1/1
L   FF00::/8 [0/0]
     via Null0, receive
R1#
</code></pre>
<h2 id="distancia-administrativa"><a class="header" href="#distancia-administrativa">Distancia administrativa</a></h2>
<p><br><br>
Una entrada de ruta para una dirección de red específica (longitud de prefijo y prefijo) sólo puede aparecer una vez en la tabla de enrutamiento. Sin embargo, es posible que la tabla de enrutamiento aprenda acerca de la misma dirección de red desde más de un origen de enrutamiento.
<br><br>
Excepto por circunstancias muy específicas, sólo se debe implementar un protocolo de enrutamiento dinámico en un router. Sin embargo, es posible configurar tanto OSPF como EIGRP en un router, y ambos protocolos de routing pueden descubrir la misma red de destino. Sin embargo, cada protocolo de routing puede decidir tomar una ruta diferente para llegar al destino según las métricas de ese protocolo de routing.
<br><br>
Esto plantea algunas preguntas, como las siguientes:
<br><br></p>
<ul>
<li>¿Cómo sabe el router qué fuente usar?</li>
<li>¿Qué ruta instalará el router en la tabla de routing? ¿La ruta aprendida de OSPF o la ruta aprendida de EIGRP?</li>
</ul>
<p><br><br>
El IOS de Cisco utiliza lo que se conoce como “distancia administrativa” (AD) para determinar la ruta que se debe instalar en la tabla de routing de IP. La AD representa la "confiabilidad" de la ruta. Cuanto menor es la AD, mayor es la confiabilidad de la ruta. Dado que EIGRP tiene un AD de 90 y OSPF tiene un AD de 110, la entrada de ruta EIGRP se instalaría en la tabla de enrutamiento.
<br><br>
<strong>Nota:</strong> AD no representa necesariamente qué protocolo de enrutamiento dinámico es el mejor .
<br><br>
Un ejemplo más común es un router que aprende la misma dirección de red de una ruta estática y un protocolo de enrutamiento dinámico, como OSPF. Por ejemplo, la AD de una ruta estática es 1, mientras que la AD de una ruta descubierta por OSPF es 110. El router elige la ruta con la AD más baja entre dos rutas diferentes al mismo destino. Cuando un router puede elegir entre una ruta estática y una ruta de OSPF, la ruta estática tiene prioridad.
<br><br>
<strong>Nota:</strong> Las redes conectadas directamente tienen el AD más bajo de 0. Sólo una red conectada directamente puede tener un AD de 0.
<br><br>
En la tabla, se muestran diferentes protocolos de routing y sus AD asociadas.</p>
<div class="table-wrapper"><table><thead><tr><th>Origen de la ruta</th><th>Distancia administrativa</th></tr></thead><tbody>
<tr><td>Conectado directamente</td><td>0</td></tr>
<tr><td>Ruta estática</td><td>1</td></tr>
<tr><td>Ruta resumida del protocolo EIGRP</td><td>5</td></tr>
<tr><td>BGP externo</td><td>20</td></tr>
<tr><td>EIGRP interno</td><td>90</td></tr>
<tr><td>OSPF</td><td>110</td></tr>
<tr><td>IS-IS</td><td>115</td></tr>
<tr><td>RIP</td><td>120</td></tr>
<tr><td>EIGRP externo</td><td>170</td></tr>
<tr><td>BGP interno</td><td>200</td></tr>
</tbody></table>
</div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../Networking/routing/Basic_Router_Configuration_Review.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../Networking/Static_and_Dynamic_Routing.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../Networking/routing/Basic_Router_Configuration_Review.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../Networking/Static_and_Dynamic_Routing.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../theme/additional.js"></script>


    </div>
    </body>
</html>
